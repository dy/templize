let e,a,r,l,o,t,s,c=(l,o=(a=l,e=0,r=[],!(l=u())||a[e]?n():e=>l(e||{})))=>(o.args=r,o),b=e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e,n=(r="Bad syntax",l=a[e])=>{throw SyntaxError(r+" `"+l+"` at "+e)},f=(r=1,l=e,o)=>{if("number"==typeof r)e+=r;else for(;r(a.charCodeAt(e));)e++;return a.slice(l,e)},u=(a=0,r,l,o,t,s)=>{for(;(l=p())&&(t=(s=h[l])&&s(o,a)||!o&&d());)o=t;return r&&(l==r?e++:n()),o},p=r=>{for(;(r=a.charCodeAt(e))<=32;)e++;return r},d=(e=f(b),a)=>e?(a=a=>a[e],r.push(e),a.id=()=>e,a):0,h=[],i=c.set=(r,l,o=32,t=r.charCodeAt(0),s=r.length,c=h[t],n=o.length||([o,l]=[l,o],0),f=r.toUpperCase()!==r,p=(n>1?(e,a)=>e&&(a=u(l))&&(e.length||a.length?r=>o(e(r),a(r)):(e=o(e(),a()),()=>e)):n?e=>!e&&(e=u(l-1))&&(a=>o(e(a))):o))=>h[t]=(o,t,n=e)=>t<l&&(s<2||a.substr(e,s)==r)&&(!f||!b(a.charCodeAt(e+s)))&&(e+=s,p(o,t))||(e=n,c&&c(o,t)),C=e=>e>=48&&e<=57,y=r=>(r&&n("Unexpected number"),r=f((e=>46==e||C(e))),(69==a.charCodeAt(e)||101==a.charCodeAt(e))&&(r+=f(2)+f(C)),(r=+r)!=r?n("Bad number"):()=>r),m=(e,a,r=e.of)=>l=>a(r?r(l):l,e.id());for(o=48;o<=57;)h[o++]=y;for(l=['"',e=>(e=e?n("Unexpected string"):f((e=>e-34)),f()||n("Bad string"),()=>e),,".",(e,a,r)=>e?(p(),a=f(b)||n(),(r=r=>e(r)[a]).id=()=>a,r.of=e,r):y(f(-1)),18,"[",(e,a,r)=>e&&(a=u(0,93)||n(),(r=r=>e(r)[a(r)]).id=a,r.of=e,r),18,"(",(e,a,r)=>(a=u(0,41),e?r=>e(r).apply(e.of?.(r),a?a.all?a.all(r):[a(r)]:[]):a||n()),18,",",(e,a,r=u(1))=>(r.all=e.all?a=>[...e.all(a),r(a)]:a=>[e(a),r(a)],r),1,"|",6,(e,a)=>e|a,"||",4,(e,a)=>e||a,"&",8,(e,a)=>e&a,"&&",5,(e,a)=>e&&a,"^",7,(e,a)=>e^a,"==",9,(e,a)=>e==a,"!=",9,(e,a)=>e!=a,">",10,(e,a)=>e>a,">=",10,(e,a)=>e>=a,">>",11,(e,a)=>e>>a,">>>",11,(e,a)=>e>>>a,"<",10,(e,a)=>e<a,"<=",10,(e,a)=>e<=a,"<<",11,(e,a)=>e<<a,"+",12,(e,a)=>e+a,"+",15,e=>+e,"++",e=>m(e||u(14),e?(e,a)=>e[a]++:(e,a)=>++e[a]),15,"-",12,(e,a)=>e-a,"-",15,e=>-e,"--",e=>m(e||u(14),e?(e,a)=>e[a]--:(e,a)=>--e[a]),15,"!",15,e=>!e,"*",13,(e,a)=>e*a,"/",13,(e,a)=>e/a,"%",13,(e,a)=>e%a];[o,t,s,...l]=l,o;)i(o,t,s);Symbol.observable||(Symbol.observable=Symbol("observable"));const v=(e,a,r)=>(a.next=a,e&&(e.subscribe?.(a)||e[Symbol.observable]?.().subscribe?.(a)||e.set&&e.call?.(r,a)||(e.then?.((e=>!r&&a(e)))||(async l=>{for await(e of e){if(r)return;a(e)}})())&&(e=>r=1))),g=(...e)=>({createCallback:(a,r,l)=>e.map((e=>e.createCallback?.(a,r,l))),processCallback:(a,r,l)=>e.map((e=>e.processCallback?.(a,r,l)))}),k={createCallback(e,a,r){for(const e of a)e.evaluate=c(e.expression)},processCallback(e,a,r){for(const e of a)e.value=e.evaluate(r)}},x={createCallback(e,a,r,l=[]){for(const e in r)(o=r[e])&&(o[Symbol.observable]||o[Symbol.asyncIterator]||o.call&&o.set||o.subscribe||o.then)&&(l.push(v(r[e],(a=>r[e]=a))),r[e]=null);var o}};export{g as combine,k as expressions,x as reactivity};