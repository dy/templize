let e,r,l,a,t,o,n,s=(a,t=(r=a,e=0,l=[],!(a=d())||r[e]?b():e=>a(e||{})))=>(t.args=l,t),c=e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||36==e||95==e||e>=192&&215!=e&&247!=e,b=(l="Bad syntax",a=r[e])=>{throw SyntaxError(l+" `"+a+"` at "+e)},f=(l=1,a=e,t)=>{if("number"==typeof l)e+=l;else for(;l(r.charCodeAt(e));)e++;return r.slice(a,e)},d=(r=0,l,a,t,o,n)=>{for(;(a=i())&&(o=(n=p[a])&&n(t,r)||!t&&u());)t=o;return l&&(a==l?e++:b()),t},i=l=>{for(;(l=r.charCodeAt(e))<=32;)e++;return l},u=(e=f(c),r)=>e?(r=r=>r[e],l.push(e),r.id=()=>e,r):0,p=[],h=s.set=(l,a,t=32,o=l.charCodeAt(0),n=l.length,s=p[o],b=t.length||([t,a]=[a,t],0),f=l.toUpperCase()!==l,i=(b>1?(e,r)=>e&&(r=d(a))&&(e.length||r.length?l=>t(e(l),r(l)):(e=t(e(),r()),()=>e)):b?e=>!e&&(e=d(a-1))&&(r=>t(e(r))):t))=>p[o]=(t,o,b=e)=>o<a&&(n<2||r.substr(e,n)==l)&&(!f||!c(r.charCodeAt(e+n)))&&(e+=n,i(t,o))||(e=b,s&&s(t,o)),C=e=>e>=48&&e<=57,y=l=>(l&&b("Unexpected number"),l=f((e=>46==e||C(e))),(69==r.charCodeAt(e)||101==r.charCodeAt(e))&&(l+=f(2)+f(C)),(l=+l)!=l?b("Bad number"):()=>l),m=(e,r,l=e.of)=>a=>r(l?l(a):a,e.id()),v={n:"\n",r:"\r",t:"\t",b:"\b",f:"\f",v:"\v"},x=l=>(a,t,o="")=>{for(a&&b("Unexpected string");(t=r.charCodeAt(e))-l;)t===BSLASH?(f(),t=f(),o+=v[t]||t):o+=f();return f()||b("Bad string"),()=>o};for(t=48;t<=57;)p[t++]=y;for((a=['"',x(34),,"'",x(39),,".",(e,r,l)=>e?(i(),r=f(c)||b(),(l=l=>e(l)?.[r]).id=()=>r,l.of=e,l):y(f(-1)),18,"[",(e,r,l)=>e&&(r=d(0,93)||b(),(l=l=>e(l)[r(l)]).id=r,l.of=e,l),18,"(",(e,r,l)=>(r=d(0,41),e?l=>e(l).apply(e.of?.(l),r?r.all?r.all(l):[r(l)]:[]):r||b()),18,",",(e,r,l=d(1))=>(l.all=e.all?r=>[...e.all(r),l(r)]:r=>[e(r),l(r)],l),1,"|",6,(e,r)=>e|r,"||",4,(e,r)=>e||r,"&",8,(e,r)=>e&r,"&&",5,(e,r)=>e&&r,"^",7,(e,r)=>e^r,"==",9,(e,r)=>e==r,"!=",9,(e,r)=>e!=r,">",10,(e,r)=>e>r,">=",10,(e,r)=>e>=r,">>",11,(e,r)=>e>>r,">>>",11,(e,r)=>e>>>r,"<",10,(e,r)=>e<r,"<=",10,(e,r)=>e<=r,"<<",11,(e,r)=>e<<r,"+",12,(e,r)=>e+r,"+",15,e=>+e,"++",e=>m(e||d(14),e?(e,r)=>e[r]++:(e,r)=>++e[r]),15,"-",12,(e,r)=>e-r,"-",15,e=>-e,"--",e=>m(e||d(14),e?(e,r)=>e[r]--:(e,r)=>--e[r]),15,"!",15,e=>!e,"*",13,(e,r)=>e*r,"/",13,(e,r)=>e/r,"%",13,(e,r)=>e%r,":",3.1,(e,r)=>[e,r],"?",3,(e,r)=>e?r[0]:r[1],"===",9,(e,r)=>e===r,"!==",9,(e,r)=>e!==r,"~",15,e=>~e,"**",(e,r,l=d(13))=>r=>e(r)**l(r),14,"null",e=>e?b("Unexpected literal"):()=>null,,"true",e=>e?b("Unexpected literal"):()=>!0,,"false",e=>e?b("Unexpected literal"):()=>!1,,"undefined",e=>e?b("Unexpected literal"):()=>{},,"in",10,(e,r)=>e in r]);[t,o,n,...a]=a,t;)h(t,o,n);Symbol.observable||(Symbol.observable=Symbol("observable"));const S=(e,r,l)=>(r.next=r,e&&(e.subscribe?.(r)||e[Symbol.observable]?.().subscribe?.(r)||e.set&&e.call?.(l,r)||(e.then?.((e=>!l&&r(e)))||(async a=>{for await(e of e){if(l)return;r(e)}})())&&(e=>l=1))),A={createCallback(e,r,l){for(const e of r)e.evaluate=s(e.expression)},processCallback(e,r,l){for(const e of r)e.value=e.evaluate(l)}},g={createCallback(e,r,l,a=[]){for(const e in l)(t=l[e])&&(t[Symbol.observable]||t[Symbol.asyncIterator]||t.call&&t.set||t.subscribe||t.then)&&(a.push(S(l[e],(r=>l[e]=r))),l[e]=null);var t}},k=(...e)=>({createCallback:(r,l,a)=>e.map((e=>e.createCallback?.(r,l,a))),processCallback:(r,l,a)=>e.map((e=>e.processCallback?.(r,l,a)))});export{k as combine,A as expressions,g as reactivity};